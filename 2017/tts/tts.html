<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">

    <title>语音合成-对话版 易伙三商  by iFlytek Web Api</title>
    <meta http-equiv="keywords" content="free mobile website templates, free mobile website template, free iphone template, free android template, free high end touch mobile templates, free high end touch mobile template">
    <meta http-equiv="description" content="Get free mobile website templates for Iphone , Android and High end touch mobile devices">
    <link href="./css/style.css" rel="stylesheet" type="text/css">
    <script src="./js/jquery.min.js"></script>
    <link href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/Sortable/1.6.0/Sortable.min.js"></script>
<style>
.list{min-height:800px}
</style>
<body>
	<div id="header">
        <div class="nav">
        	<ul>
                <li><a href="">语音播放</a></li>
                <li><a href="">录音软件下载</a></li>
				<li><a href="">如何录电脑的声音</a></li>
                <li><a href="">视频软件下载</a></li>
            </ul>
        </div>
        <div class="logo"><a href=""><img src="./images/logo.png" alt="Company Logo - voicecloud.cn"></a></div>
    </div>
    <div class="clear"></div>

<!-- TODO
添加后，然后下拉换人
自动播下一条 -->

<div class="well">
    <div class="row">
        <div class="col-sm-6">
            <a  class="btn btn-lg btn-warning addman"  people="aisxping" type="btn-warning">女声</a>
            <a  class="btn btn-lg btn-danger addman" people="xiaoyu"  type="btn-danger">男声</a>
            <a  class="btn btn-lg btn-success addman"  people="vixr" type="btn-success">四川 女声</a>
            <a  class="btn btn-lg btn-info addman"  people="vixk" type="btn-info">河南 男声</a>
        </div>
        <div class="col-sm-6">

                <select id="vcn" class="btn btn-default  btn-lg">
                    <option value="viviyufeng">青年男声1，普通话</option>
                    <option value="xiaoyu">青年男声-新闻，普通话</option>
                    <option value="aisxping">青年女声1，普通话</option>
                    <option value="xiaoyan">青年女声，普通话</option>
                    <option value="vixy">小燕，普通话</option>
                    <option value="vils">老孙 （普通话）</option>
                    <option value="Catherine">----英文---</option>
                    <option value="Catherine">英文女声</option>
                    <option value="henry">英文男声</option>
                    <option value="vixm">-----地方话-----</option>
                    <option value="vixm">小梅，粤语</option>
                    <option value="vixl">小莉，台湾普通话</option>
                    <option value="vixr">小蓉，四川话</option>
                    <option value="vixyun">小芸，东北话</option>
                    <option value="vixqa">小强 （湖南话）</option>
                    <option value="vixk">小坤（河南话）</option>
                    <option value="vixying">小莹 （陕西话） </option>
                    <option value="vixx">-----特色-----</option>
                    <option value="vixx">小新，童年男声</option>
                    <option value="vinn">楠楠，童年女声</option>
                </select>
                 <select id="spd" class="btn btn-default  btn-lg">
                    <option value="100">语速</option>
                    <option value="20">慢</option>
                    <option value="50">medium</option>
                    <option value="70">fast</option>
                    <option value="200">x-fast</option>
                </select>
                <a  class="btn btn-info addx  btn-lg" > 添加</a>

          </div><!-- /.col-lg-6 -->

        </div>
    </div>

</div>

<style>
    .input-group{margin-bottom:10px;}
    #list div{text-align:center;}
</style>
<div class="row">
  <div class="col-lg-12 list" id="list">
<div>
    <div class="input-group">
      <span class="input-group-btn play">
        <button class="btn btn-success " type="button">播放</button>
      </span>
      <span class="input-group-addon" people="viviyufeng">男</span>
      <input type="text" class="form-control" value="你好呀"  id="content">
      <span class="input-group-btn delete"><button class="btn btn-danger " type="button">删</button></span>
    </div><!-- /input-group -->
    <div class="pay"></div>
 </div>

  </div><!-- /.col-lg-12 -->


</div><!-- /.row -->

    <script type="text/javascript" src="./js/fingerprint.js"></script>
    <script type="text/javascript" src="./js/tts.min.js"></script>
    <script type="text/javascript" src="./js/tts_demo.js"></script>


<script>
    var list = document.getElementById("list");
Sortable.create(list); // That's all.

$(".addx").click(function(){

    var people=$('#vcn').val();
    var people2=$('#vcn option:selected').text();
    var spd = $('#spd').val();
    console.log("添加"+people+"/速度"+spd);
    var man = '<div><div class="input-group"><span class="input-group-btn play">        <button class="btn btn-info " type="button">播放</button>      </span>     <span class="input-group-addon" people="'+people+'" spd="'+spd+'">'+people2+'</span>   <input type="text" class="form-control" value="你好呀">     <span class="input-group-btn delete"><button class="btn btn-danger " type="button">删</button></span>   </div><div></div></div>';
    $(".list").append(man);
})


$(".addman").click(function(){
    console.log("添加");
    var btntype = $(this).attr('type');
    console.log(btntype);
    if(typeof(btntype) == "undefined"){
    	btntype = "btn-info";
    }
    var people = $(this).attr('people');
    var people2=$(this).text();
    var spd = $('#spd').val();
    console.log("添加"+people+"/速度"+spd);
    var man = '<div><div class="input-group"><span class="input-group-btn play">        <button class="btn '+btntype+' " type="button">播放</button>      </span>     <span class="input-group-addon" people="'+people+'" spd="'+spd+'">'+people2+'</span>   <input type="text" class="form-control" value="你好呀">     <span class="input-group-btn delete"><button class="btn btn-danger " type="button">删</button></span>   </div> <div></div></div>';
    $(".list").append(man);
})


// $(".delete").click(function(){
$(".row").on("click",".delete",function(){
    $(this).parent().remove();
})

 $(".row").on("click",".play",function(){
    console.log("对话开始");
    // $(this).children().addClass("btn-danger");
    var vcn =  $(this).next().attr('people');
    var spd =  $(this).next().attr('spd');
    var content =  $(this).next().next().val();
    var playit = $(this).parent().next('div');



    console.log("获取内容："+content+" \n说话人："+vcn+" \n速度："+spd);
    // play(text, people ,spd);
    var obj2 = $(this);
    reset();
    if(spd ==undefined){
        spd=50;
    }

    ssb_param = {"appid": '56e68961', "appkey":"4f120dad94ab69c2", "synid":"12345", "params" : "ent=aisound,aue=lame,spd=mediummedium,vcn="+vcn+",spd="+spd};

    session.start(ssb_param, content, function (err, obj)
    {
        console.log(obj);
        var audio_url = audioPalyUrl + obj.audio_url;
        if( audio_url != null && audio_url != undefined )
        {
            window.iaudio.src = audio_url;
            window.iaudio.play();
            playit.html('<audio  controls="controls" src="'+audio_url+'"></audio>');
         console.log("-----说完本句  "+audio_url);
        }else{
         console.log("-----出错了-----");

        }
          // playNext(obj2);
          // window.setTimeout(playNext(obj2), 3000);
    });
 })

 function playNext(obj){
     console.log("----------------下一句-------------");
     var next = obj.parent().next().children().next();
    var people1 =  next.attr('people');
    var text1 =  next.next().val();
    console.log("获取内容："+text1+" \n说话人："+people1);
    if( text1 != undefined){
        console.log("说下一句");

    }else{
        console.log("-----对话结束-----");
    }
    // window.setTimeout(play(text1, people1), 1000);
    // play(text1, people1);
 }
</script>
</body></html>
